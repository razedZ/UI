local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")

local PizdecWare = {}
PizdecWare.__index = PizdecWare

function PizdecWare:CreateWindow(guiName, infoText, saveFileName)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.Name = guiName

    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.BackgroundColor3 = Color3.fromRGB(19, 21, 25)
    MainFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
    MainFrame.BorderSizePixel = 0
    MainFrame.Position = UDim2.new(0.0323343836, 0, 0.194723621, 0)
    MainFrame.Size = UDim2.new(0, 630, 0, 460)
    MainFrame.BackgroundTransparency = 1

    local UICorner = Instance.new("UICorner")
    UICorner.Parent = MainFrame

    local Logo = Instance.new("Frame")
    Logo.Name = "Logo"
    Logo.Parent = MainFrame
    Logo.BackgroundColor3 = Color3.fromRGB(150, 17, 255)
    Logo.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Logo.BorderSizePixel = 0
    Logo.Position = UDim2.new(0.0215927847, 0, 0.0306019653, 0)
    Logo.Size = UDim2.new(0, 25, 0, 25)
    Logo.ZIndex = 3
    Logo.BackgroundTransparency = 0 -- Убрал белый фон, вернул прозрачность к 0 как в оригинале

    local UICorner_17 = Instance.new("UICorner")
    UICorner_17.Parent = Logo

    local W = Instance.new("TextLabel")
    W.Name = "W"
    W.Parent = Logo
    W.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    W.BackgroundTransparency = 1.000
    W.BorderColor3 = Color3.fromRGB(255, 255, 255)
    W.BorderSizePixel = 0
    W.Position = UDim2.new(0.28230226, 0, 0.75999999, 0)
    W.Size = UDim2.new(0, 23, 0, -14)
    W.ZIndex = 4
    W.Font = Enum.Font.SourceSansBold
    W.Text = "W"
    W.TextColor3 = Color3.fromRGB(0, 0, 0)
    W.TextSize = 20.000
    W.TextTransparency = 1

    local PizdecWareLabel = Instance.new("TextLabel")
    PizdecWareLabel.Name = "PizdecWare"
    PizdecWareLabel.Parent = Logo
    PizdecWareLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    PizdecWareLabel.BackgroundTransparency = 1.000
    PizdecWareLabel.BorderColor3 = Color3.fromRGB(255, 255, 255)
    PizdecWareLabel.BorderSizePixel = 0
    PizdecWareLabel.Position = UDim2.new(2.21097422, 0, 1.29638064, 0)
    PizdecWareLabel.Size = UDim2.new(0, 60, 0, -41)
    PizdecWareLabel.ZIndex = 4
    PizdecWareLabel.Font = Enum.Font.SourceSansBold
    PizdecWareLabel.Text = "PizdecWare"
    PizdecWareLabel.TextColor3 = Color3.fromRGB(150, 17, 255)
    PizdecWareLabel.TextSize = 25.000
    PizdecWareLabel.TextTransparency = 1

    local P = Instance.new("TextLabel")
    P.Name = "P"
    P.Parent = Logo
    P.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    P.BackgroundTransparency = 1.000
    P.BorderColor3 = Color3.fromRGB(255, 255, 255)
    P.BorderSizePixel = 0
    P.Position = UDim2.new(-0.304138184, 0, 0.75999999, 0)
    P.Size = UDim2.new(0, 27, 0, -14)
    P.ZIndex = 4
    P.Font = Enum.Font.SourceSansBold
    P.Text = "P"
    P.TextColor3 = Color3.fromRGB(255, 255, 255)
    P.TextSize = 20.000
    P.TextTransparency = 1

    local Info = Instance.new("TextLabel")
    Info.Name = "Info"
    Info.Parent = MainFrame
    Info.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Info.BackgroundTransparency = 1.000
    Info.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Info.BorderSizePixel = 0
    Info.Position = UDim2.new(0.0543069504, 0, 0.0833290443, 0)
    Info.Size = UDim2.new(0, 116, 0, 10)
    Info.Font = Enum.Font.SourceSansBold
    Info.Text = infoText
    Info.TextColor3 = Color3.fromRGB(170, 176, 183)
    Info.TextSize = 10.000
    Info.TextXAlignment = Enum.TextXAlignment.Right
    Info.TextTransparency = 1

    local ElementContainer = Instance.new("Frame")
    ElementContainer.Name = "ElementContainer"
    ElementContainer.Parent = MainFrame
    ElementContainer.Active = true
    ElementContainer.BackgroundColor3 = Color3.fromRGB(23, 24, 28)
    ElementContainer.BorderColor3 = Color3.fromRGB(0, 0, 0)
    ElementContainer.BorderSizePixel = 0
    ElementContainer.LayoutOrder = 3
    ElementContainer.Position = UDim2.new(0.259076893, 0, 0.116228454, 0)
    ElementContainer.Size = UDim2.new(0, 460, 0, 400)
    ElementContainer.ZIndex = 3
    ElementContainer.BackgroundTransparency = 1

    local UICorner_2 = Instance.new("UICorner")
    UICorner_2.Parent = ElementContainer

    -- Animation for fading in
    local function fadeIn(element)
        local tweenInfo = TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.In)
        if element:IsA("TextLabel") or element:IsA("TextButton") then
            local tween = TweenService:Create(element, tweenInfo, {
                BackgroundTransparency = element.BackgroundTransparency == 1 and 0 or element.BackgroundTransparency,
                TextTransparency = element.TextTransparency == 1 and 0 or element.TextTransparency
            })
            tween:Play()
        else
            local tween = TweenService:Create(element, tweenInfo, {
                BackgroundTransparency = element.BackgroundTransparency == 1 and 0 or element.BackgroundTransparency
            })
            tween:Play()
        end
    end

    -- Phase 1: Fade in initial elements
    wait(0) -- Small delay to ensure proper order
    fadeIn(MainFrame)
    fadeIn(Logo)
    fadeIn(W)
    fadeIn(PizdecWareLabel)
    fadeIn(P)
    fadeIn(Info)
    fadeIn(ElementContainer)
    wait(1) -- Wait for initial elements to fade in

    -- Phase 2: Create and fade in other elements
    local TabZone = Instance.new("Frame")
    TabZone.Name = "TabZone"
    TabZone.Parent = MainFrame
    TabZone.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    TabZone.BackgroundTransparency = 1.000
    TabZone.BorderColor3 = Color3.fromRGB(0, 0, 0)
    TabZone.BorderSizePixel = 0
    TabZone.Position = UDim2.new(0, 0, 0.116228454, 0)
    TabZone.Size = UDim2.new(0, 163, 0, 399)
    fadeIn(TabZone)

    local Tabs = Instance.new("TextLabel")
    Tabs.Name = "Tabs"
    Tabs.Parent = TabZone
    Tabs.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Tabs.BackgroundTransparency = 1.000
    Tabs.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Tabs.BorderSizePixel = 0
    Tabs.Size = UDim2.new(0, 50, 0, 20)
    Tabs.Font = Enum.Font.ArialBold
    Tabs.Text = "Tabs"
    Tabs.TextColor3 = Color3.fromRGB(147, 152, 156)
    Tabs.TextSize = 14.000
    Tabs.TextTransparency = 1
    fadeIn(Tabs)

    local Tab1 = Instance.new("TextLabel")
    Tab1.Name = "Tab 1"
    Tab1.Parent = TabZone
    Tab1.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Tab1.BackgroundTransparency = 1.000
    Tab1.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Tab1.BorderSizePixel = 0
    Tab1.Position = UDim2.new(0.30674848, 0, 0.0501253121, 0)
    Tab1.Size = UDim2.new(0, 101, 0, 28)
    Tab1.Font = Enum.Font.Unknown
    Tab1.Text = "Tab 1"
    Tab1.TextColor3 = Color3.fromRGB(150, 17, 255)
    Tab1.TextSize = 20.000
    Tab1.TextXAlignment = Enum.TextXAlignment.Left
    Tab1.TextTransparency = 1
    fadeIn(Tab1)

    local ImageLabel = Instance.new("ImageLabel")
    ImageLabel.Parent = Tab1
    ImageLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ImageLabel.BackgroundTransparency = 1.000
    ImageLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
    ImageLabel.BorderSizePixel = 0
    ImageLabel.Position = UDim2.new(-0.364666939, 0, 0.036599841, 0)
    ImageLabel.Size = UDim2.new(0, 26, 0, 26)
    ImageLabel.ZIndex = 3
    ImageLabel.Image = "rbxassetid://14134388410"
    ImageLabel.ImageColor3 = Color3.fromRGB(150, 17, 255)
    ImageLabel.BackgroundTransparency = 1
    fadeIn(ImageLabel)

    local Tab2 = Instance.new("TextLabel")
    Tab2.Name = "Tab 2"
    Tab2.Parent = TabZone
    Tab2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Tab2.BackgroundTransparency = 1.000
    Tab2.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Tab2.BorderSizePixel = 0
    Tab2.Position = UDim2.new(0.30674848, 0, 0.140350878, 0)
    Tab2.Size = UDim2.new(0, 101, 0, 30)
    Tab2.Font = Enum.Font.Unknown
    Tab2.Text = "Tab 2"
    Tab2.TextColor3 = Color3.fromRGB(147, 152, 156)
    Tab2.TextSize = 20.000
    Tab2.TextXAlignment = Enum.TextXAlignment.Left
    Tab2.TextTransparency = 1
    fadeIn(Tab2)

    local ImageLabel_2 = Instance.new("ImageLabel")
    ImageLabel_2.Parent = Tab2
    ImageLabel_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ImageLabel_2.BackgroundTransparency = 1.000
    ImageLabel_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
    ImageLabel_2.BorderSizePixel = 0
    ImageLabel_2.Position = UDim2.new(-0.364666939, 0, 0.0365966782, 0)
    ImageLabel_2.Size = UDim2.new(0, 26, 0, 26)
    ImageLabel_2.Image = "rbxassetid://13557340523"
    fadeIn(ImageLabel_2)

    local SelectedTab = Instance.new("Frame")
    SelectedTab.Name = "SelectedTab"
    SelectedTab.Parent = TabZone
    SelectedTab.BackgroundColor3 = Color3.fromRGB(150, 17, 255)
    SelectedTab.BackgroundTransparency = 0.900
    SelectedTab.BorderColor3 = Color3.fromRGB(0, 0, 0)
    SelectedTab.BorderSizePixel = 0
    SelectedTab.Position = UDim2.new(0, 0, 0.0476190485, 0)
    SelectedTab.Size = UDim2.new(0, 163, 0, 30)
    SelectedTab.ZIndex = 2
    SelectedTab.BackgroundTransparency = 1
    fadeIn(SelectedTab)

    local ImageButton = Instance.new("ImageButton")
    ImageButton.Parent = MainFrame
    ImageButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ImageButton.BackgroundTransparency = 1.000
    ImageButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
    ImageButton.BorderSizePixel = 0
    ImageButton.Position = UDim2.new(0.949206471, 0, 0.0173913036, 0)
    ImageButton.Size = UDim2.new(0, 25, 0, 25)
    ImageButton.Image = "rbxassetid://12653789995"
    ImageButton.BackgroundTransparency = 1
    fadeIn(ImageButton)

    -- Save file functionality
    local function saveSettings()
        local settings = {
            guiName = guiName,
            infoText = infoText
        }
        local json = HttpService:JSONEncode(settings)
        writefile(saveFileName, json)
    end

    local function loadSettings()
        if isfile(saveFileName) then
            local json = readfile(saveFileName)
            local settings = HttpService:JSONDecode(json)
            Info.Text = settings.infoText
        end
    end

    -- Load settings on initialization
    loadSettings()

    -- Save settings when GUI is closed
    game:BindToClose(saveSettings)

    -- Method to create a tab
    function PizdecWare:CreateTab(visualName, imageId)
        local tab = Instance.new("TextLabel")
        tab.Name = visualName
        tab.Parent = TabZone
        tab.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        tab.BackgroundTransparency = 1.000
        tab.BorderColor3 = Color3.fromRGB(0, 0, 0)
        tab.BorderSizePixel = 0
        tab.Position = UDim2.new(0.30674848, 0, 0, 0) -- Adjust position dynamically if needed
        tab.Size = UDim2.new(0, 101, 0, 28)
        tab.Font = Enum.Font.Unknown
        tab.Text = visualName
        tab.TextColor3 = Color3.fromRGB(147, 152, 156)
        tab.TextSize = 20.000
        tab.TextXAlignment = Enum.TextXAlignment.Left
        tab.TextTransparency = 1
        fadeIn(tab)

        local image = Instance.new("ImageLabel")
        image.Parent = tab
        image.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        image.BackgroundTransparency = 1.000
        image.BorderColor3 = Color3.fromRGB(0, 0, 0)
        image.BorderSizePixel = 0
        image.Position = UDim2.new(-0.364666939, 0, 0.036599841, 0)
        image.Size = UDim2.new(0, 26, 0, 26)
        image.ZIndex = 3
        image.Image = "rbxassetid://" .. imageId
        image.ImageColor3 = Color3.fromRGB(150, 17, 255)
        image.BackgroundTransparency = 1
        fadeIn(image)

        return tab
    end

    return setmetatable({}, PizdecWare)
end

return PizdecWare
